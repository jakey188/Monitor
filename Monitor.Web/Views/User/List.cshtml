@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = " 用户列表";
}
@section script{
    <script>
        $(function () {
            var vue = new Vue({
                el: '#app',
                data: {
                    pageOptions: {
                        currentPage: 1,
                        totalPages: 1,
                        alignment: "right",
                        onPageClicked: function (e, originalEvent, type, page) {
                            vue.pageOptions.currentPage = page;
                            vue.getList();
                        }
                    },
                    apiGetListUrl: '@Url.Content("~/")api/GetUserList',
                    apiDeleteUrl: '@Url.Content("~/")api/Computer/Delete',
                    dataList: []
                },
                ready: function () {
                    //this.getList();
                },
                methods: {
                    createUser: function () {
                        alert(1);
                    },
                    computerDelete: function (id) {
                        var vm = this;
                        dialog.confirm("确认删除吗", function () {
                            $.ajax({
                                url: vm.apiDeleteUrl,
                                type: 'get',
                                dataType: 'json',
                                data: { id: id },
                                success: function (response) {
                                    if (response.s === 10006) {
                                        vm.getList();
                                    }
                                }
                            })
                        });
                    },
                    getList: function () {
                        var vm = this;
                        $.ajax({
                            url: vm.apiGetListUrl,
                            beforeSend: function () {
                                loading();
                            },
                            type: 'get',
                            dataType: 'json',
                            data: {
                                pageIndex: vm.pageOptions.currentPage,
                                watchTime: vm.watchTime,
                                url: vm.url,
                                startDate: vm.startDate,
                                endDate: vm.endDate
                            },
                            success: function (response) {
                                if (response.s === 10006) {
                                    vm.dataList = response.data;
                                    if (response.count > response.pgSize) {
                                        vm.pageOptions.totalPages = getTotalPage(response.count, response.pgSize);
                                        $('.pagination').bootstrapPaginator(vm.pageOptions);
                                    } else {
                                        $('.pagination').html('');
                                    }
                                }

                            },
                            complete: function () {
                                loading(false);
                            }
                        })
                    }
                }
            });
        });
    </script>
}
@section scriptSrc{
    <script src="~/Statics/js/bootstrap-paginator.js"></script>
    <script src="~/Statics/js/jquery.validate.min.js"></script>
    <script src="~/Statics/js/jquery.validate.bootstrap.js"></script>
}
<ul class="breadcrumb">
    <li>
        <a href="/">监控中心</a> <span class="divider">/</span>
    </li>
    <li>
        <a href="javascript:void(0)">用户信息</a> <span class="divider">/</span>
    </li>
    <li class="active">
        列表信息
    </li>
</ul>
<div class="container">
    <div class="row">
        <div class="span12">
            <p>
                <a href="#addUserModal" role="button" class="btn" data-toggle="modal">创建用户</a>
                </p>
</div>
    </div>
</div>
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>
                用户名
            </th>
            <th>
                真实姓名
            </th>
            <th>
                角色
            </th>
            <th>
                手机号码
            </th>
            <th>
                邮箱
            </th>
            <th>
                操作
            </th>
        </tr>
    </thead>
    <tbody>
        <tr v-for="item in dataList">
            <td>
                {{item.userName}}
            </td>
            <td>
                {{item.trueName}}
            </td>
            <td>
                {{item.role}}
            </td>
            <td>
                {{item.mobile}}
            </td>
            <td>
                {{item.email}}
            </td>
            <td>
                <a href="javascript:void(0)" v-on:click="computerDelete(item.id)">删除</a>
            </td>
        </tr>
    </tbody>
</table>
<div class="pagination pagination-right"></div>

@Html.Partial("_UserInfo")